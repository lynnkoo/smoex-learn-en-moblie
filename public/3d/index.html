<html>
  <head>
    <title>My first three.js app</title>
    <style>
      body {
        margin: 0;
      }
      canvas {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <script src="js/three.js"></script>
    <script src="js/gltf.js"></script>
    <script src="js/orbit.js"></script>
    <script>
      var scene = new THREE.Scene()
      scene.background = new THREE.Color(0xa0a0a0)
      var camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000,
      )

      var renderer = new THREE.WebGLRenderer()
      renderer.setSize(window.innerWidth, window.innerHeight)
      document.body.appendChild(renderer.domElement)

      var loader = new THREE.GLTFLoader()

      const file = location.search.slice(6)

      var ambient = new THREE.AmbientLight(0xffffff)
      scene.add(ambient) //将环境光添加到场景中

      const light1 = new THREE.PointLight(0xffffff, 10)
      light1.position.set(0, 5, 5)
      scene.add(light1)

      // const light2 = new THREE.PointLight(0xffffff, 10)
      // light1.position.set(5, 5, 5)
      // // scene.add(light2);

      loader.load(
        'https://public.smoex.com/' + file,
        function(gltf) {
          scene.add(gltf.scene)

          console.log(gltf)

          var animate = function() {
            requestAnimationFrame(animate)
            // gltf.scene.rotation.x += 0.01;
            // gltf.scene.rotation.y += 0.01;

            renderer.render(scene, camera)
          }

          animate()
        },
        undefined,
        function(error) {
          console.error(error)
        },
      )

      camera.position.z = 5
      var controls = new THREE.OrbitControls(camera, renderer.domElement)

      renderer.render(scene, camera)
    </script>
  </body>
</html>
